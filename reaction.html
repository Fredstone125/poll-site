<!DOCTYPE html>
<html>
<head>
    <title>Reaction Time Test</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body style="text-align:center; font-family: Arial;">

    <h1>Reaction Time Test</h1>

    <button id="startBtn">Start</button>

    <div id="box" 
         style="
            width:200px;
            height:200px;
            background:red;
            margin:40px auto;
            cursor:pointer;
         ">
    </div>

    <h2 id="waitDisplay"></h2>
    <h2 id="timeDisplay"></h2>


    <button id="resetBtn" style="display:none;">Play Again</button>

    <script>
        const startBtn = document.getElementById("startBtn");
        const box = document.getElementById("box");
        const timeDisplay = document.getElementById("timeDisplay");
        const resetBtn = document.getElementById("resetBtn");

        let startTime;
        let waitStartTime;
        let timeout;
        let timerInterval;
        let waitInterval;


        function resetGame() {
            box.style.background = "red";
            timeDisplay.textContent = "";
            startBtn.style.display = "inline-block";
            resetBtn.style.display = "none";
            clearInterval(waitInterval);
            waitDisplay.textContent = "";
        }

        startBtn.addEventListener("click", () => {
            startBtn.style.display = "none";

            waitStartTime = performance.now();

            waitInterval = setInterval(() => {
                const currentTime = performance.now();
                const waitTime = currentTime - waitStartTime;
                waitDisplay.textContent = 
                    "Wait Time: " + (waitTime / 1000).toFixed(3) + " seconds";
            }, 10);


            const randomDelay = Math.random() * 6000 + 1000; // 1â€“7 seconds

            timeout = setTimeout(() => {
                box.style.background = "green";
            
                clearInterval(waitInterval);
            
                startTime = performance.now();


                timerInterval = setInterval(() => {
                    const currentTime = performance.now();
                    const reactionTime = currentTime - startTime;
                    timeDisplay.textContent = 
                        (reactionTime / 1000).toFixed(3) + " seconds";
                }, 10);

            }, randomDelay);
        });

        box.addEventListener("click", () => {
            if (box.style.background === "green") {
                clearInterval(timerInterval);
                resetBtn.style.display = "inline-block";
            }
        });

        resetBtn.addEventListener("click", resetGame);
    </script>

</body>
</html>
